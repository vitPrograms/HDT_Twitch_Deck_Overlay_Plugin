<Window x:Class="TwitchDeckOverlay.UI.SettingsView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        mc:Ignorable="d" 
        Title="TwitchDeckOverlay Settings" 
        Height="700" Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        MinHeight="600" MinWidth="550">
    
    <Window.Resources>
        <!-- Modern styling resources -->
        <Style x:Key="ModernGroupBox" TargetType="GroupBox">
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,5,0,10"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Background" Value="#FAFAFA"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#333333"/>
        </Style>
        
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#2C3E50"/>
            <Setter Property="Margin" Value="0,15,0,10"/>
        </Style>
        
        <Style x:Key="HelpText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="#7F8C8D"/>
            <Setter Property="FontStyle" Value="Italic"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="Margin" Value="0,2,0,8"/>
        </Style>
        
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#3498DB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2980B9"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#21618C"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#95A5A6"/>
        </Style>
        
        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#E74C3C"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header with Icon -->
        <Border Grid.Row="0" Background="#34495E" Padding="20,15">
            <StackPanel Orientation="Horizontal">
                <Ellipse Width="40" Height="40" Fill="#3498DB" Margin="0,0,15,0"/>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Text="TwitchDeckOverlay Settings" 
                               FontSize="20" FontWeight="Bold" 
                               Foreground="White"/>
                    <TextBlock Text="Configure your plugin preferences" 
                               FontSize="12" 
                               Foreground="#BDC3C7"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Main Content with TabControl -->
        <TabControl Grid.Row="1" Margin="15" TabStripPlacement="Top">
            
            <!-- General Tab -->
            <TabItem Header="ðŸ”§ General">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                    <StackPanel>
                        
                        <!-- Connection Settings -->
                        <GroupBox Header="ðŸ”— Connection Settings" Style="{StaticResource ModernGroupBox}">
                            <StackPanel>
                                <Label Content="Twitch Channel:" FontWeight="SemiBold"/>
                                <TextBox x:Name="TwitchChannelTextBox" Margin="0,0,0,5"/>
                                <TextBlock Text="Enter the Twitch channel name to monitor (without @ symbol)" 
                                          Style="{StaticResource HelpText}"/>
                                
                                <Label Content="Streamer Nickname (Display):" FontWeight="SemiBold" Margin="0,10,0,0"/>
                                <TextBox x:Name="TwitchChannelNicknameTextBox" Margin="0,0,0,5"/>
                                <TextBlock Text="Custom display name for the streamer (optional)" 
                                          Style="{StaticResource HelpText}"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- API Settings -->
                        <GroupBox Header="ðŸ”‘ API Configuration" Style="{StaticResource ModernGroupBox}">
                            <StackPanel>
                                <Label Content="Blizzard Bearer Token:" FontWeight="SemiBold"/>
                                <TextBox x:Name="BlizzardTokenTextBox" Margin="0,0,0,5"/>
                                <TextBlock Text="Enter your Blizzard API bearer token. Generate one at https://develop.battle.net/" 
                                          Style="{StaticResource HelpText}"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Collection Settings -->
                        <GroupBox Header="ðŸ’Ž Collection &amp; Dust" Style="{StaticResource ModernGroupBox}">
                            <StackPanel>
                                <CheckBox x:Name="CheckCardsInCollectionCheckBox"
                                         Content="Check Cards in Collection"
                                         IsChecked="{Binding CheckCardsInCollectionEnabled}"
                                         Margin="0,0,0,8"/>
                                
                                <CheckBox x:Name="CalculateTotalDustCostCheckBox"
                                         Content="Calculate Total Deck Cost"
                                         IsChecked="{Binding CalculateTotalDustCostEnabled}"
                                         IsEnabled="{Binding IsChecked, ElementName=CheckCardsInCollectionCheckBox}"
                                         Margin="20,0,0,8"/>
                                
                                <CheckBox x:Name="CalculateDustNeededCheckBox"
                                         Content="Calculate Dust Needed for Missing Cards"
                                         IsChecked="{Binding CalculateDustNeededEnabled}"
                                         IsEnabled="{Binding IsChecked, ElementName=CheckCardsInCollectionCheckBox}"
                                         Margin="20,0,0,8"/>
                                
                                <CheckBox x:Name="ShowFocusWindowOnCopyCheckBox"
                                         Content="Show Focus Window on Deck Code Copy"
                                         IsChecked="{Binding ShowFocusWindowOnCopyEnabled}"
                                         Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Interface Settings -->
                        <GroupBox Header="ðŸŽ¨ Interface" Style="{StaticResource ModernGroupBox}">
                            <StackPanel>
                                <Label Content="Maximum Decks in List:" FontWeight="SemiBold"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBox x:Name="MaxDecksInListTextBox" 
                                            Width="80" 
                                            Text="{Binding MaxDecksInList}"
                                            Margin="0,0,10,0"/>
                                    <TextBlock Text="(Recommended: 5-15)" 
                                              VerticalAlignment="Center" 
                                              Style="{StaticResource HelpText}"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                        
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- HSGuru Tab -->
            <TabItem Header="ðŸ“Š HSGuru">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                    <StackPanel>
                        
                        <!-- HSGuru Main Settings -->
                        <GroupBox Header="ðŸ“ˆ Online Statistics" Style="{StaticResource ModernGroupBox}">
                            <StackPanel>
                                <CheckBox x:Name="FetchOnlineStatisticsCheckBox"
                                         Content="Enable HSGuru Online Statistics"
                                         IsChecked="{Binding FetchOnlineStatisticsEnabled}"
                                         FontWeight="SemiBold"
                                         Margin="0,0,0,15"/>
                                
                                <TextBlock Text="Data Sources:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                
                                <CheckBox x:Name="FetchWinRateAndGamesCheckBox"
                                         Content="ðŸ“Š Win Rate and Games Count"
                                         IsChecked="{Binding FetchWinRateAndGamesEnabled}"
                                         IsEnabled="{Binding IsChecked, ElementName=FetchOnlineStatisticsCheckBox}"
                                         Margin="20,0,0,8"/>
                                
                                <CheckBox x:Name="FetchArchetypeCheckBox"
                                         Content="ðŸŽ¯ Deck Archetype Detection"
                                         IsChecked="{Binding FetchArchetypeEnabled}"
                                         IsEnabled="{Binding IsChecked, ElementName=FetchOnlineStatisticsCheckBox}"
                                         Margin="20,0,0,8"/>
                                
                                <CheckBox x:Name="FetchMatchupsCheckBox"
                                         Content="âš”ï¸ Class Matchup Data"
                                         IsChecked="{Binding FetchMatchupsEnabled}"
                                         IsEnabled="{Binding IsChecked, ElementName=FetchOnlineStatisticsCheckBox}"
                                         Margin="20,0,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- HSGuru Filters -->
                        <GroupBox Header="ðŸ” Search Filters" Style="{StaticResource ModernGroupBox}">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Label Grid.Row="0" Grid.Column="0" Content="Rank Filter:" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                <ComboBox Grid.Row="0" Grid.Column="1" 
                                         x:Name="HSGuruRankFilterComboBox"
                                         IsEnabled="{Binding IsChecked, ElementName=FetchOnlineStatisticsCheckBox}"
                                         Margin="10,0,0,10">
                                    <ComboBoxItem Content="All Ranks" Tag="all"/>
                                    <ComboBoxItem Content="Diamond to Legend" Tag="diamond_to_legend"/>
                                    <ComboBoxItem Content="Diamond 4-1" Tag="diamond_4to1"/>
                                    <ComboBoxItem Content="Legend" Tag="legend"/>
                                    <ComboBoxItem Content="Top 5000" Tag="top_5k"/>
                                    <ComboBoxItem Content="Top Legend" Tag="top_legend"/>
                                </ComboBox>
                                
                                <Label Grid.Row="1" Grid.Column="0" Content="Time Period:" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                <ComboBox Grid.Row="1" Grid.Column="1" 
                                         x:Name="HSGuruPeriodFilterComboBox"
                                         IsEnabled="{Binding IsChecked, ElementName=FetchOnlineStatisticsCheckBox}"
                                         Margin="10,0,0,10">
                                    <ComboBoxItem Content="Past Week" Tag="past_week"/>
                                    <ComboBoxItem Content="Past 3 Days" Tag="past_3_days"/>
                                    <ComboBoxItem Content="Past Day" Tag="past_day"/>
                                    <ComboBoxItem Content="Past 6 Hours" Tag="past_6_hours"/>
                                </ComboBox>
                                
                                <TextBlock Grid.Row="2" Grid.ColumnSpan="2" 
                                          Text="Filters help you get more specific statistics from HSGuru based on rank and time period." 
                                          Style="{StaticResource HelpText}"/>
                            </Grid>
                        </GroupBox>
                        
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Advanced Tab -->
            <TabItem Header="âš™ï¸ Advanced">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                    <StackPanel>
                        
                        <!-- Performance Testing -->
                        <GroupBox Header="ðŸš€ Performance Testing" Style="{StaticResource ModernGroupBox}">
                            <StackPanel>
                                <TextBlock Text="Test plugin performance and memory usage" 
                                          Style="{StaticResource HelpText}" Margin="0,0,0,10"/>
                                
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="RunPerformanceTestButton" 
                                           Content="Run Performance Test" 
                                           Style="{StaticResource ModernButton}"
                                           Click="RunPerformanceTestButton_Click"/>
                                    <Button x:Name="RunMemoryTestButton" 
                                           Content="Memory Test" 
                                           Style="{StaticResource SecondaryButton}"
                                           Click="RunMemoryTestButton_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- Updates -->
                        <GroupBox Header="ðŸ”„ Updates" Style="{StaticResource ModernGroupBox}">
                            <StackPanel>
                                <TextBlock Text="Check for plugin updates and new features" 
                                          Style="{StaticResource HelpText}" Margin="0,0,0,10"/>
                                
                                <Button x:Name="CheckUpdatesButton" 
                                       Content="Check for Updates" 
                                       Style="{StaticResource ModernButton}"
                                       Click="CheckUpdatesButton_Click"
                                       HorizontalAlignment="Left"/>
                            </StackPanel>
                        </GroupBox>
                        
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
        </TabControl>

        <!-- Bottom Action Bar -->
        <Border Grid.Row="2" Background="#ECF0F1" Padding="15,10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="SaveButton" 
                       Content="ðŸ’¾ Save Settings" 
                       Style="{StaticResource ModernButton}"
                       Click="SaveButton_Click"/>
                <Button x:Name="CancelButton" 
                       Content="âŒ Cancel" 
                       Style="{StaticResource SecondaryButton}"
                       Click="CancelButton_Click"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>